(function(){"use strict";var t={2563:function(t,e,n){var i=n(6523),o=n(1422);function l(t,e,n,i,l,u){const r=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(r)}var u=(0,o.pM)({name:"HomeView",components:{},data(){return{}}}),r=n(9562);const a=(0,r.A)(u,[["render",l]]);var c=a,s=n(1985),h=(n(5379),n(2393)),v=n(4368);const f=t=>((0,o.Qi)("data-v-66d804ce"),t=t(),(0,o.jt)(),t),d={class:"home"},g=f((()=>(0,o.Lk)("div",null,"文章列表",-1))),p={class:"columnList"},m=["src"],w={class:"list"},y=["onClick"],k=["src"],b={key:0};var C=(0,o.pM)({__name:"list",setup(t){const e=(0,v.KR)(-1),n=(0,v.KR)([{id:1,height:0,list:[]},{id:2,height:0,list:[]}]),i=(0,v.KR)([]),l=(0,v.KR)({}),u=(0,v.KR)(!1);async function r(){u.value=!0,loadPage(-1===e.value?"https://www.ptt.cc/bbs/Beauty/index.html":`https://www.ptt.cc/bbs/Beauty/index${e.value}.html`).then((async t=>{console.log("##########",t);const{maxPage:i,list:o}=t,l=o.reverse();e.value=-1===e.value?i-1:e.value-1;for(let e=0;e<l.length;e++){const t=l[e],i=await loadDetail(t.link,e);if(console.log(i),i&&0===i.length){a({id:1,title:t.title,img:null,height:20});continue}let o={id:1,title:t.title,img:null,height:40};if(i)for(let e=0;e<i.length;e++){const l=i[e],u=await new Promise((e=>{const i=new Image;i.onload=function(){console.log("!!!!"+i.height);const u=window.innerWidth/n.value.length;o={id:1,title:t.title,img:l,height:i.height/i.width*u},e(!0)},i.onerror=function(){e(!1)},i.src=l}));if(u)break}a(o)}u.value=!1}))}function a(t){let e=0;if(n.value.length)for(let i=0;i<n.value.length;i++)n.value[i].height<n.value[e].height&&(e=i);n.value[e].height+=t.height,n.value[e].list.push(t)}function c(t){console.log(t)}return console.log("!!!!",o.sV),(0,o.sV)((()=>{r()})),(t,e)=>((0,o.uX)(),(0,o.CE)("div",d,[g,(0,o.Lk)("div",p,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.value,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"column"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.list,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"article",style:(0,h.Tr)({height:t.height+"px"})},[(0,o.eW)((0,h.v_)(t.title)+" ",1),(0,o.Lk)("img",{src:t.img,style:{width:"90%"}},null,8,m)],4)))),128))])))),128))]),(0,o.Lk)("div",w,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.value,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"item",onClick:e=>c(t)},[(0,o.eW)((0,h.v_)(t.title)+" ",1),t.img?((0,o.uX)(),(0,o.CE)("img",{key:0,src:l.value[t.img],width:"80"},null,8,k)):(0,o.Q3)("",!0)],8,y)))),128))]),u.value?((0,o.uX)(),(0,o.CE)("div",b,"加载中")):((0,o.uX)(),(0,o.CE)("div",{key:1,onClick:r},"下一页"))]))}});const E=(0,r.A)(C,[["__scopeId","data-v-66d804ce"]]);var O=E;const X=[{path:"/",name:"list",component:O}],x=(0,s.aE)({history:(0,s.Bt)(),routes:X});var K=x,_=n(8122),j=(0,_.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,i.Ef)(c).use(j).use(K).mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var l=e[i]={exports:{}};return t[i].call(l.exports,l,l.exports,n),l.exports}n.m=t,function(){var t=[];n.O=function(e,i,o,l){if(!i){var u=1/0;for(s=0;s<t.length;s++){i=t[s][0],o=t[s][1],l=t[s][2];for(var r=!0,a=0;a<i.length;a++)(!1&l||u>=l)&&Object.keys(n.O).every((function(t){return n.O[t](i[a])}))?i.splice(a--,1):(r=!1,l<u&&(u=l));if(r){t.splice(s--,1);var c=o();void 0!==c&&(e=c)}}return e}l=l||0;for(var s=t.length;s>0&&t[s-1][2]>l;s--)t[s]=t[s-1];t[s]=[i,o,l]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,l,u=i[0],r=i[1],a=i[2],c=0;if(u.some((function(e){return 0!==t[e]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(a)var s=a(n)}for(e&&e(i);c<u.length;c++)l=u[c],n.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return n.O(s)},i=self["webpackChunkptt"]=self["webpackChunkptt"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(2563)}));i=n.O(i)})();
//# sourceMappingURL=app.2be5b397.js.map