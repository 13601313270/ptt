(function(){"use strict";var t={9236:function(t,e,n){var i=n(6523),o=n(1422);function r(t,e,n,i,r,l){const u=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(u)}var l=(0,o.pM)({name:"HomeView",components:{},data(){return{}}}),u=n(9562);const a=(0,u.A)(l,[["render",r]]);var c=a,s=n(1985),h=(n(5379),n(2393)),f=n(4368),v=n(3311);const d=t=>((0,o.Qi)("data-v-3636d571"),t=t(),(0,o.jt)(),t),g={class:"home"},p=d((()=>(0,o.Lk)("div",null,"文章列表",-1))),m={class:"columnList"},w=["src"],b={class:"list"},y=["onClick"],k=["src"],C={key:0};var E=(0,o.pM)({__name:"list",setup(t){const e=(0,f.KR)(-1),n=(0,f.KR)([{id:1,height:0,list:[]},{id:2,height:0,list:[]}]),i=(0,f.KR)([]),r=(0,f.KR)({}),l=(0,f.KR)(!1);async function u(){l.value=!0;const t=await new Promise((t=>{fetch(-1===e.value?"https://www.ptt.cc/bbs/Beauty/index.html":`https://www.ptt.cc/bbs/Beauty/index${e.value}.html`).then((function(t){return t.text()})).then((e=>{t(e)}))})),i=(0,v.Hh)(t),o=i(".btn-group-paging>a"),r=o[1].attribs.href.match(/index(\d+).html/)[1];console.log("maxPage",r),e.value=-1===e.value?r-1:e.value-1;const u=i(".r-list-container>.r-ent>.title>a"),c=[];for(let e=0;e<u.length;e++){const t=u[e];let n=t.children[0].data;c.push({title:n,link:"https://www.ptt.cc/"+t.attribs.href})}const s=c.reverse();e.value=-1===e.value?r-1:e.value-1;for(let e=0;e<s.length;e++){const t=s[e],i=await new Promise((e=>{fetch(t.link).then((function(t){return t.text()})).then((t=>{e(t)}))})),o=(0,v.Hh)(i),r=o("#main-content img").slice(0,3);if(window.sss=r,r&&0===r.length){a({id:1,title:t.title,img:null,height:20});continue}let l={id:1,title:t.title,img:null,height:40};if(r)for(let e=0;e<r.length;e++){const i=r[e].attribs.src,o=await new Promise((e=>{const o=new Image;o.onload=function(){const r=window.innerWidth/n.value.length;l={id:1,title:t.title,img:i,height:o.height/o.width*r},e(!0)},o.onerror=function(){e(!1)},o.src=i}));if(o)break}a(l)}l.value=!1}function a(t){let e=0;if(n.value.length)for(let i=0;i<n.value.length;i++)n.value[i].height<n.value[e].height&&(e=i);n.value[e].height+=t.height,n.value[e].list.push(t)}function c(t){console.log(t)}return console.log("!!!!",o.sV),(0,o.sV)((()=>{u()})),(t,e)=>((0,o.uX)(),(0,o.CE)("div",g,[p,(0,o.Lk)("div",m,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.value,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"column"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.list,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"article",style:(0,h.Tr)({height:t.height+"px"})},[(0,o.eW)((0,h.v_)(t.title)+" ",1),(0,o.Lk)("img",{src:t.img,style:{width:"90%"}},null,8,w)],4)))),128))])))),128))]),(0,o.Lk)("div",b,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.value,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.id,class:"item",onClick:e=>c(t)},[(0,o.eW)((0,h.v_)(t.title)+" ",1),t.img?((0,o.uX)(),(0,o.CE)("img",{key:0,src:r.value[t.img],width:"80"},null,8,k)):(0,o.Q3)("",!0)],8,y)))),128))]),l.value?((0,o.uX)(),(0,o.CE)("div",C,"加载中")):((0,o.uX)(),(0,o.CE)("div",{key:1,onClick:u},"下一页"))]))}});const O=(0,u.A)(E,[["__scopeId","data-v-3636d571"]]);var x=O;const X=[{path:"/",name:"list",component:x}],_=(0,s.aE)({history:(0,s.Bt)(),routes:X});var j=_,K=n(8122),P=(0,K.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,i.Ef)(c).use(P).use(j).mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,i,o,r){if(!i){var l=1/0;for(s=0;s<t.length;s++){i=t[s][0],o=t[s][1],r=t[s][2];for(var u=!0,a=0;a<i.length;a++)(!1&r||l>=r)&&Object.keys(n.O).every((function(t){return n.O[t](i[a])}))?i.splice(a--,1):(u=!1,r<l&&(l=r));if(u){t.splice(s--,1);var c=o();void 0!==c&&(e=c)}}return e}r=r||0;for(var s=t.length;s>0&&t[s-1][2]>r;s--)t[s]=t[s-1];t[s]=[i,o,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,r,l=i[0],u=i[1],a=i[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(a)var s=a(n)}for(e&&e(i);c<l.length;c++)r=l[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(s)},i=self["webpackChunkptt"]=self["webpackChunkptt"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[504],(function(){return n(9236)}));i=n.O(i)})();
//# sourceMappingURL=app.b942a649.js.map