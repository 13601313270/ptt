(function(){"use strict";var t={5104:function(t,n,e){var i=e(5130),l=e(6768);function o(t,n,e,i,o,u){const r=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(r)}var u=(0,l.pM)({name:"HomeView",components:{},data(){return{}}}),r=e(1241);const c=(0,r.A)(u,[["render",o]]);var a=c,s=e(1387),A=(e(4114),e(4232)),g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAABFlJREFUeF7tnVtS4zAQAMXN4Ea+AcsNdKPNzXbXYAqTdaIZeUjNo/1DFZEVabo9ethJnhpH6Qg8le49nW8IUFwCBECA4hEo3n0yAAIUj0Dx7pMBEKB4BIp3nwyAAMUjULz7ZAAEKB6B4t0nAyBA8QgU7z4ZwFiAZVmee+8X42p/rDoEMArtsiy/Wmuvu+reeu/r/1wfCGCAZ1mW362154Oq3EuAACcFuAP/vebeu+sYu27cSTY/fvoI/tYA11kAASY1EcJfa3/xPClEgAkBFPAZAibi6/aUdYnXWlsnfNLD9dW/doIMIEQ5Ad/12P/ZbQQQCJAVPhmgOHwEGAiQ+cpnCLCH737Cd9Rl5gAHUTnY1x8NFiHhMwQUh48AVwJUuvKZAwD/PQLMAVprFa98MsAWgcrwy2cAJfxL7/1ltByI9nrZIQD4H6qWFAD4X3mqnADA/z5IlRIA+P/PUMoIAPzj6WkJAYB/e22SXgAl/BBP8VguNVMLAPyxKmkF0Dy5+285XO7KT70VDPzxlZ9WAODL4afbCQS+Dn4qAYCvh59GAODPwQ8vQIXHtufRys4MuwwEvgzwqFRIAYA/wip/PZwAwJfDlZQMJQDwJUh1ZcIIAHwdWGnpEAIAX4pTX869AMo7emsEyt7Y0eN3/lAo8GeQ6s5xmwEm4If9hK4OmW1plwIA3xbyvdrcCQD8x8F3dy9gYrZP2j/pi6sMsCzLH0V/gK8I1q2ibgRQXv3AN4DvaghAACOiymrcZIC13QwBSnoGxb0JcP2rG6MuMhSMIjR43ZUAWxZAgpNQNae7EwAJNPjOl3UpABKcByutwa0ASCBFeK6cawEmJeB2sMIJ9wIggYLmRNEQAmwSaH+uhUwgECKMAEggoDlRJJQASDBBONpGkKSLyvsGa5UMBzcCGy4DfPYDCSSXyrhMWAEYDsZwJSVCC4AEEsT3y4QXAAnOSZBCgJ0Er621db9AcjAxzPht4XxbiMT9rzJpMsC+20gglyClANuQsP7KN8NBxo0gqd9kgnGk0maA3YaRJhOk/F2gexqkF2BiOCglQQkBkOB2DigjABIcS1BKgE0CzWPn6YeDcgIgwfdMUFIAJEi+Ezhe/X6UUH4ZxWV7sGT9m+YomwF2+wSaOcF6WqrPI5YXYCITpJIAAbZUoBwO0kiAALvRvKIECHA1nasmAQIczOcrSYAANxZ0VSRAgDsr+goSIMBgS2dCglAPmyKAYE8vswQIIBBgcrMoRCZAAKEAWSVAAIUAmwSqL6rovbuOsevGKdk8rLjmk8kI8DAsj30jqQQI8FguD303gQTuHyljCDipzEAC988OIMBJAXYTw/0nk0MsAde2I4CBAJGrQIDI9AzajgAGQYxcBQJEpmfQdgQwCGLkKhAgMj2DtiOAQRAjV4EAkekZtB0BDIIYuQoEiEzPoO0IYBDEyFUgQGR6Bm1HAIMgRq4CASLTM2g7AhgEMXIVCBCZnkHb/wIHNOCQihP/HAAAAABJRU5ErkJggg==",h=e(144),f=e(5535);const v=t=>((0,l.Qi)("data-v-306dfbbd"),t=t(),(0,l.jt)(),t),d={class:"home"},m=["onClick"],w=["src"],p={class:"title"},k={key:0,class:"loading"},C=v((()=>(0,l.Lk)("div",{class:"button"},"下一頁",-1))),I=[C],E={key:2,class:"popArticle"},y={class:"nav"},b=v((()=>(0,l.Lk)("img",{src:g},null,-1))),B=[b],Q={class:"title"},M={class:"content"},P=["innerHTML"];var O=(0,l.pM)({__name:"list",setup(t){const n=(0,h.KR)(-1),e=(0,h.KR)([{id:1,height:0,list:[]},{id:2,height:0,list:[]}]),i=((0,h.KR)({}),(0,h.KR)(!1)),o=(0,h.KR)(null),u=(0,h.KR)(null);async function r(){i.value=!0;const t=await new Promise((t=>{fetch(-1===n.value?"https://www.ptt.cc/bbs/Beauty/index.html":`https://www.ptt.cc/bbs/Beauty/index${n.value}.html`).then((function(t){return t.text()})).then((n=>{t(n)}))})),l=(0,f.Hh)(t),o=l(".btn-group-paging>a"),u=o[1].attribs.href.match(/index(\d+).html/)[1];console.log("maxPage",u),n.value=-1===n.value?u-1:n.value-1;const r=l(".r-list-container>.r-ent>.title>a"),a=[];for(let n=0;n<r.length;n++){const t=r[n];let e=t.children[0].data;a.push({title:e,link:"https://www.ptt.cc"+t.attribs.href})}const s=a.reverse();n.value=-1===n.value?u-1:n.value-1;for(let n=0;n<s.length;n++){const t=s[n],i=await new Promise((n=>{let e=null;setTimeout((()=>{null===e&&(n(null),e=!0)}),2e3),fetch(t.link).then((function(t){return t.text()})).then((t=>{null===e&&(n(t),e=!0)}))}));if(null===i){c({id:1e4*Math.random(),title:t.title,img:null,height:0,link:t.link,content:null});continue}const l=(0,f.Hh)(i);let o=Array.from(l("#main-content img")).slice(0,1);if(window.sss=o,o&&0===o.length){c({id:1,title:t.title,img:null,height:20,link:t.link,content:l("#main-content").html()});continue}let u={id:1,title:t.title,img:null,link:t.link,height:40,content:""};if(o)for(let n=0;n<o.length;n++){const i=o[n].attribs.src,r=await new Promise((n=>{let o=null;setTimeout((()=>{null===o&&(u={id:1,title:t.title,img:null,link:t.link,height:0,content:l("#main-content").html()},n(!1),o=!1)}),3e3);const r=new Image;r.onload=function(){const c=window.innerWidth/e.value.length;u={id:1,title:t.title,img:i,link:t.link,height:r.height/r.width*c,content:l("#main-content").html()},null===o&&(n(!0),o=!0)},r.onerror=function(){null===o&&(n(!1),o=!1)},r.src=i}));if(r)break}c(u)}i.value=!1}function c(t){let n=0;const i=o.value.children;for(let e=0;e<i.length;e++)i[e].clientHeight<i[n].clientHeight&&(n=e);e.value[n].height+=t.height,e.value[n].list.push(t)}function a(t){console.log(t),null===t.content&&fetch(t.link).then((function(t){return t.text()})).then((n=>{const e=(0,f.Hh)(n);t.content=e("#main-content").html()})),u.value=t}return console.log("!!!!",l.sV),(0,l.sV)((()=>{r()})),(t,n)=>((0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",{class:"columnList",ref_key:"columnList",ref:o},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.value,(t=>((0,l.uX)(),(0,l.CE)("div",{key:t.id,class:"column"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.list,(t=>((0,l.uX)(),(0,l.CE)("div",{key:t.id,class:"article",onClick:n=>a(t)},[t.img?((0,l.uX)(),(0,l.CE)("img",{key:0,src:t.img,style:{width:"100%"}},null,8,w)):(0,l.Q3)("",!0),(0,l.Lk)("div",p,(0,A.v_)(t.title),1)],8,m)))),128))])))),128))],512),i.value?((0,l.uX)(),(0,l.CE)("div",k,"加載中")):((0,l.uX)(),(0,l.CE)("div",{key:1,onClick:r,class:"nextPage"},I)),u.value?((0,l.uX)(),(0,l.CE)("div",E,[(0,l.Lk)("div",y,[(0,l.Lk)("div",{class:"back",onClick:n[0]||(n[0]=t=>u.value=null)},B),(0,l.Lk)("div",Q,(0,A.v_)(u.value.title),1)]),(0,l.Lk)("div",M,[(0,l.Lk)("div",{innerHTML:u.value.content},null,8,P)])])):(0,l.Q3)("",!0)]))}});const D=(0,r.A)(O,[["__scopeId","data-v-306dfbbd"]]);var x=D;const S=[{path:"/",name:"list",component:x}],X=(0,s.aE)({history:(0,s.Bt)(),routes:S});var L=X,K=e(782),J=(0,K.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,i.Ef)(a).use(J).use(L).mount("#app")}},n={};function e(i){var l=n[i];if(void 0!==l)return l.exports;var o=n[i]={exports:{}};return t[i].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(n,i,l,o){if(!i){var u=1/0;for(s=0;s<t.length;s++){i=t[s][0],l=t[s][1],o=t[s][2];for(var r=!0,c=0;c<i.length;c++)(!1&o||u>=o)&&Object.keys(e.O).every((function(t){return e.O[t](i[c])}))?i.splice(c--,1):(r=!1,o<u&&(u=o));if(r){t.splice(s--,1);var a=l();void 0!==a&&(n=a)}}return n}o=o||0;for(var s=t.length;s>0&&t[s-1][2]>o;s--)t[s]=t[s-1];t[s]=[i,l,o]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(n){return 0===t[n]};var n=function(n,i){var l,o,u=i[0],r=i[1],c=i[2],a=0;if(u.some((function(n){return 0!==t[n]}))){for(l in r)e.o(r,l)&&(e.m[l]=r[l]);if(c)var s=c(e)}for(n&&n(i);a<u.length;a++)o=u[a],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(s)},i=self["webpackChunkptt"]=self["webpackChunkptt"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=e.O(void 0,[504],(function(){return e(5104)}));i=e.O(i)})();
//# sourceMappingURL=app.996b6c55.js.map